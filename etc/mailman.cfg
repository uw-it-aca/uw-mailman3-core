# this is just a hack to get things running, this all needs to be generated correctly
# This file is autogenerated at container startup.
[database]
#url: sqlite:////app/database/sqlite.db
#class: mailman.database.postgresql.PostgreSQLDatabase
#url: postgres://mailman:mailmanpass@database/mailmandb
url: postgres://${DATABASE_USERNAME}:${DATABASE_PASSWORD}@database/${DATABASE_DB_NAME}

[runner.retry]
sleep_time: 10s

[webservice]
hostname: ${MAILMAN_HOSTNAME}
port: 8001
#admin_user: restadmin
#admin_pass: restpass
admin_user: ${MAILMAN_ADMIN_USER}
admin_pass: ${MAILMAN_ADMIN_PASSWORD}
configuration: /etc/gunicorn.cfg

[archiver.hyperkitty]
class: mailman_hyperkitty.Archiver
enable: yes
configuration: /etc/mailman-hyperkitty.cfg

[mta]
#incoming: mailman.mta.exim4.LMTP
incoming: mailman.mta.postfix.LMTP
outgoing: mailman.mta.deliver.deliver
lmtp_host: ${MAILMAN_HOSTNAME}
lmtp_port: 8024
smtp_host: ${SMTP_HOST}
smtp_port: 25
#configuration: python:mailman.config.exim4
configuration: /etc/postfix-mailman.cfg

[mailman]
# This address is the "site owner" address.  Certain messages which must be
# delivered to a human, but which can't be delivered to a list owner (e.g. a
# bounce from a list owner), will be sent to this address.  It should point to
# a human.
site_owner: ${MAILMAN_SITE_OWNER}

# Since we're just a process in a pod, let k8s collect logging
[logging.root]
path: /dev/stdout
